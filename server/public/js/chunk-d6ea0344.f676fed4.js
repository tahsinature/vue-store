(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6ea0344"],{"293a":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container mt-4"},[e._m(0),e.selectedConversation?s("div",{staticClass:"chat-app"},["list"!==e.mode&&e.ismobileMode?e._e():s("div",{staticClass:"partner-list"},e._l(e.chats,(function(t){return s("div",{key:t._id,staticClass:"chat-tile",class:{active:t._id===e.selectedConversation._id},on:{click:function(s){e.changeSelectedConversation(t._id),e.mode="display"}}},[s("div",{staticClass:"chat-tile__img-box"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.partner.profilePhoto.url,expression:"chat.partner.profilePhoto.url"}]})]),s("div",{staticClass:"chat-tile__partnerName"},[s("p",[e._v(e._s(t.partner.fullName))])])])})),0),"display"!==e.mode&&e.ismobileMode?e._e():s("div",{staticClass:"chat-display"},[e.ismobileMode?s("div",{staticClass:"chat-display--back-button"},[s("button",{on:{click:function(t){e.mode="list"}}},[e._v("Show Message List")])]):e._e(),s("div",{staticClass:"chat-display__header"},[s("p",[e._v("Chat With\n          "),s("router-link",{attrs:{to:"profile/"+e.selectedConversation.partner._id}},[s("strong",[e._v(e._s(e.selectedConversation.partner.fullName))])])],1),s("p",{staticClass:"d-flex align-items-center",class:{"text-muted":!e.selectedConversation.partner.isOnline}},[s("i",{staticClass:"fas fa-circle mr-1",style:{color:e.selectedConversation.partner.isOnline?"green":"#820404a3"}}),e._v("\n          "+e._s(e.selectedConversation.partner.isOnline?"Online":"Offline")+"\n        ")])]),s("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!0,smooth:!1,scrollonremoved:!0},expression:"{always: true, smooth: false, scrollonremoved:true}"}],staticClass:"chat-display__messages"},[s("p",{staticClass:"text-center mt-3 mb-3 text-muted"},[e._v("Conversation Started")]),e._l(e.selectedConversation.messages,(function(t){return s("div",{key:t._id,staticClass:"chat-display__message",class:{"my-text":t.author==e.getAdmin._id,"partner-text":t.author!=e.getAdmin._id}},[s("p",[e._v(e._s(t.text))])])}))],2),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage.text,expression:"newMessage.text"}],attrs:{type:"text"},domProps:{value:e.newMessage.text},on:{focus:function(t){e.newMessage.partnerId=e.selectedConversation.partner._id},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.sendMessage(t):null},input:function(t){t.target.composing||e.$set(e.newMessage,"text",t.target.value)}}}),s("button",{style:{cursor:e.newMessage.text?"pointer":"not-allowed",color:e.newMessage.text?"#2f9e76":"#6c757d82"},attrs:{disabled:!e.newMessage.text},on:{click:e.sendMessage}},[e._v("Send")])])])]):s("div",{staticClass:"no-msg"},[s("h1",[e._v("No Conversation")]),s("p",[e._v("You can send messages either from your contact list or, visiting a user profile.")])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("h1",[e._v("Messages")])])}],i=s("cebc"),r=(s("cadf"),s("551c"),s("097d"),s("8055")),o=s.n(r),c=s("2f62"),l=s("56d7"),d=s("07a4"),u=s("db49"),v=o()(u["a"].apiURL),h={data:function(){return{myMessages:[],partnerMessages:[],newMessage:{partnerId:void 0,text:void 0},ismobileMode:window.innerWidth<=768,mode:"list"}},watch:{selectedConversation:{deep:!0,handler:function(){var e=this;this.myMessages=this.selectedConversation.messages.filter((function(t){return t.author==e.getAdmin._id})),this.partnerMessages=this.selectedConversation.messages.filter((function(t){return t.author==e.selectedConversation.partner._id}))}},chats:function(){}},methods:{retriveChats:function(){this.$store.dispatch("retriveChats")},changeSelectedConversation:function(e){this.$store.dispatch("setSelectedConversation",e)},sendMessage:function(){var e=this.newMessage.text;if(e){var t={partnerId:this.newMessage.partnerId};t.text=e,this.$store.dispatch("sendMessage",t),this.newMessage.text=""}}},computed:Object(i["a"])({},Object(c["b"])(["chats","selectedConversation","getAdmin"])),created:function(){var e=this;window.addEventListener("resize",(function(){e.ismobileMode=window.innerWidth<=768})),this.$store.dispatch("retriveChats")},mounted:function(){var e=this;v.addEventListener("onNewMessage",(function(){e.$store.dispatch("retriveChats")})),v.addEventListener("userOnline",(function(t){e.$store.dispatch("setStatusOnline",t)})),v.addEventListener("userOffline",(function(t){e.$store.dispatch("setStatusOffline",t)}))},beforeRouteEnter:function(e,t,s){if(!d["a"].getters.isLoggedIn)return s("/login"),l["default"].$emit("onNotify",{title:"Please login first",text:"You've to login first to chat.",type:"error"});s()}},p=h,f=(s("8219"),s("2877")),m=Object(f["a"])(p,n,a,!1,null,"61081e8b",null);m.options.__file="Chat.vue";t["default"]=m.exports},"6bee":function(e,t,s){},8219:function(e,t,s){"use strict";var n=s("6bee"),a=s.n(n);a.a}}]);
//# sourceMappingURL=chunk-d6ea0344.f676fed4.js.map