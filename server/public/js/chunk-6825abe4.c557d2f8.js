(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6825abe4"],{"487e":function(e,a,s){"use strict";s.r(a);var t=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"profile-control"},[t("notifications",{attrs:{group:"auth",position:"bottom right","animation-type":"velocity"}}),t("div",{staticClass:"brand"},[t("div",{staticClass:"big-image"},["login"===e.mode?t("img",{attrs:{src:s("9e19"),alt:""}}):e._e(),"register"===e.mode?t("img",{attrs:{src:s("fbe7"),alt:""}}):e._e()]),t("h1",[e._v(e._s("login"===e.mode?"Log in to Vue Store":"Sign up on Vue Store"))]),t("p",[e._v("Lorem ipsum dolor, sit amet consectetur adipisicing.")]),e._m(0)]),t("div",{staticClass:"form"},[t("h1",{staticClass:"form-title"},[e._v(e._s(e.mode)+" User")]),"login"===e.mode?t("form",{on:{submit:function(a){return a.preventDefault(),e.handleLogin(a)}}},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.userName,expression:"loginInfo.userName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:e.loginInfo.userName},on:{input:function(a){a.target.composing||e.$set(e.loginInfo,"userName",a.target.value)}}})]),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.loginInfo.password},on:{input:function(a){a.target.composing||e.$set(e.loginInfo,"password",a.target.value)}}}),t("div",{staticClass:"form-group form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.rememberPassword,expression:"loginInfo.rememberPassword"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(e.loginInfo.rememberPassword)?e._i(e.loginInfo.rememberPassword,null)>-1:e.loginInfo.rememberPassword},on:{change:function(a){var s=e.loginInfo.rememberPassword,t=a.target,r=!!t.checked;if(Array.isArray(s)){var o=null,i=e._i(s,o);t.checked?i<0&&e.$set(e.loginInfo,"rememberPassword",s.concat([o])):i>-1&&e.$set(e.loginInfo,"rememberPassword",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.loginInfo,"rememberPassword",r)}}}),t("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v("Remember Me")])])]),t("button",{staticClass:"btn btn-block btn-success"},[e._v("Login")]),t("div",{staticClass:"text-right mt-2"},[e._v("Don't have an account?\n        "),t("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1)]):e._e(),"register"===e.mode||"edit"===e.mode?t("form",{on:{submit:function(e){e.preventDefault()}}},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.fullName,expression:"userInfo.fullName"},{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{required: true}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("fullName")},attrs:{type:"text",placeholder:"Full Name",name:"fullName"},domProps:{value:e.userInfo.fullName},on:{input:function(a){a.target.composing||e.$set(e.userInfo,"fullName",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v("Name is required.")])]),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.userName,expression:"userInfo.userName"},{name:"validate",rawName:"v-validate",value:{required:!0,min:3},expression:"{required: true, min: 3}"}],staticClass:"form-control",class:[{"is-invalid":e.errors.has("userName")||"taken"===e.userNameStatus},{"is-valid":!e.errors.has("userName")&&"ok"===e.userNameStatus}],attrs:{type:"text",placeholder:"Username",name:"userName",disabled:"edit"===e.mode},domProps:{value:e.userInfo.userName},on:{blur:function(a){e.checkUserName()},focus:function(a){e.userNameStatus=null},input:function(a){a.target.composing||e.$set(e.userInfo,"userName",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("userName")))]),"taken"===e.userNameStatus?t("small",{staticClass:"invalid-feedback"},[e._v("Username already taken")]):e._e(),"ok"===e.userNameStatus?t("small",{staticClass:"valid-feedback"},[e._v("Username available ✔")]):e._e(),"checking"===e.userNameStatus?t("small",[e._v("Checking Availablity...")]):e._e()]),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:[{"is-invalid":e.errors.has("email")||"taken"===e.emailStatus},{"is-valid":!e.errors.has("email")&&"ok"===e.emailStatus}],attrs:{type:"email",name:"email",placeholder:"Email Address",disabled:"edit"===e.mode},domProps:{value:e.userInfo.email},on:{blur:function(a){e.checkEmail()},focus:function(a){e.emailStatus=null},input:function(a){a.target.composing||e.$set(e.userInfo,"email",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("email")))]),"taken"===e.emailStatus?t("small",{staticClass:"invalid-feedback"},[e._v("Email is already registered")]):e._e(),"ok"===e.emailStatus?t("small",{staticClass:"valid-feedback"},[e._v("This email is not registered yet ✔")]):e._e(),"checking"===e.emailStatus?t("small",[e._v("Checking Availablity...")]):e._e()]),"edit"!==e.mode?t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.password,expression:"userInfo.password"},{name:"validate",rawName:"v-validate",value:{required:!0,min:6},expression:"{required: true, min: 6}"}],ref:"password",staticClass:"form-control",class:{"is-invalid":e.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.userInfo.password},on:{input:function(a){a.target.composing||e.$set(e.userInfo,"password",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("password")))])]):e._e(),"edit"!==e.mode?t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation",placeholder:"Confirm Password","data-vv-as":"password"}}),t("small",{staticClass:"invalid-feedback"},[e._v("Password needs to be matched")])]):e._e(),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.contactNo,expression:"userInfo.contactNo"},{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{required: true}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("contactNo")},attrs:{type:"text",placeholder:"Contact Number",name:"contactNo"},domProps:{value:e.userInfo.contactNo},on:{input:function(a){a.target.composing||e.$set(e.userInfo,"contactNo",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v("Phone Number is required")])]),t("div",{staticClass:"form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.location,expression:"userInfo.location"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("location")},attrs:{id:"location",name:"location"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.userInfo,"location",a.target.multiple?s:s[0])}}},e._l(e.locations,(function(a){return t("option",{key:a.value,domProps:{value:a.value}},[e._v(e._s(a.name))])})),0),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("location")))])]),t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.userInfo.address,expression:"userInfo.address"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("address")},attrs:{"data-gramm_editor":"false",placeholder:"Address",name:"address"},domProps:{value:e.userInfo.address},on:{input:function(a){a.target.composing||e.$set(e.userInfo,"address",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("address")))])]),t("div",{staticClass:"bio"},[t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.userInfo.bio,expression:"userInfo.bio"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("location")},attrs:{"data-gramm_editor":"false",placeholder:"Bio...",name:"bio"},domProps:{value:e.userInfo.bio},on:{input:function(a){a.target.composing||e.$set(e.userInfo,"bio",a.target.value)}}}),t("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("bio")))])]),t("div",{staticClass:"img-control"},[e.finalImage||e.userInfo.profilePhoto?t("div",{staticClass:"img-box",on:{click:function(a){e.userInfo.profilePhoto=null,e.finalImage=null}}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.finalImage||e.userInfo.profilePhoto,expression:"finalImage || userInfo.profilePhoto"}]}),t("p",[e._v("Remove")])]):t("div",[t("image-uploader",{ref:"imageUploader",class:{"image-uploader-error":e.imgWarning},attrs:{browseText:"Click to browse",dragText:"Drag an image",primaryText:"Cover",dropText:"Drop here",popupText:"This is going to be your profile picture.",markIsPrimaryText:"Make Cover",maxImage:1},on:{"before-remove":e.beforeRemove,"upload-success":e.uploadMedia}}),e.imgWarning?t("small",{staticClass:"invalid-feedback d-inline"},[e._v("Image is required")]):e._e(),e.isUploading?t("div",{staticClass:"progress mt-2"},[t("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",style:{width:e.uploadProgress+"%"},attrs:{role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()],1)])]),t("div",{staticClass:"form-group mt-4"},[t("div",{staticClass:"form-check form-check-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.gender,expression:"userInfo.gender"}],staticClass:"form-check-input",attrs:{type:"radio",id:"male",value:"Male"},domProps:{checked:e._q(e.userInfo.gender,"Male")},on:{change:function(a){e.$set(e.userInfo,"gender","Male")}}}),t("label",{staticClass:"form-check-label",attrs:{for:"male"}},[e._v("Male")])]),t("div",{staticClass:"form-check form-check-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.gender,expression:"userInfo.gender"}],staticClass:"form-check-input",attrs:{type:"radio",id:"female",value:"Female"},domProps:{checked:e._q(e.userInfo.gender,"Female")},on:{change:function(a){e.$set(e.userInfo,"gender","Female")}}}),t("label",{staticClass:"form-check-label",attrs:{for:"female"}},[e._v("Female")])])]),"register"===e.mode?t("button",{staticClass:"btn btn-success btn-block",attrs:{disabled:e.isProcessing},on:{click:e.handleSubmit}},[e._v("\n        Register Me\n        "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}})]):e._e(),"edit"===e.mode?t("button",{staticClass:"btn btn-success btn-block",attrs:{disabled:e.isProcessing},on:{click:e.handleEdit}},[e._v("Edit & Save\n        ")]):e._e(),"register"===e.mode?t("div",{staticClass:"text-right mt-2"},[e._v("Already registerd?\n        "),t("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1):e._e()]):e._e()])],1)},r=[function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"points"},[s("div",{staticClass:"point"},[s("img",{attrs:{src:"https://w.bikroy-st.com/dist/img/all/account/1-1x-a2fc1800.png",alt:""}}),s("p",[e._v("Start posting your own ads.")])]),s("div",{staticClass:"point"},[s("img",{attrs:{src:"https://w.bikroy-st.com/dist/img/all/account/2-1x-3efcbe32.png",alt:""}}),s("p",[e._v("Mark ads as favorite and view them later.")])]),s("div",{staticClass:"point"},[s("img",{attrs:{src:"https://w.bikroy-st.com/dist/img/all/account/3-1x-b04d6b82.png",alt:""}}),s("p",[e._v("View and manage your ads at your convenience.")])])])}],o=(s("7f7f"),s("0a0d")),i=s.n(o),n=(s("28a5"),s("fc5c")),l=(s("bc3a"),s("62b0")),u=s("8aa5"),c=s.n(u),m=(s("56d7"),s("365c")),d=s("07a4"),f={components:{"image-uploader":n["a"]},data:function(){return{mode:void 0,userInfo:{fullName:"",userName:"",email:"",password:"",contactNo:"",profilePhoto:null,gender:"Male",location:null,address:"",bio:""},loginInfo:{userName:"",password:"",rememberPassword:!1},locations:[{name:"Select Location",value:null},{name:"Asia",value:"asia"},{name:"Africa",value:"africa"},{name:"North America",value:"north-america"},{name:"South America",value:"south-america"},{name:"Antartica",value:"antartica"},{name:"Europe",value:"europe"},{name:"Australia",value:"australia"}],userNameStatus:null,emailStatus:null,imgWarning:!1,confirmation:null,isProcessing:!1,selectedImages:void 0,uploadProgress:0,isUploading:!1,finalImage:null}},watch:{$route:function(e,a){this.mode=e.path.split("/")[1]}},methods:{checkUserName:function(){var e=this;!this.errors.has("userName")&&this.userInfo.userName&&(this.userNameStatus="checking",m["authController"].checkAvailablity({userName:this.userInfo.userName}).then((function(a){if(200===a.status)return e.userNameStatus="ok"})).catch((function(a){if(409===a.response.status)return e.userNameStatus="taken"})))},checkEmail:function(){var e=this;!this.errors.has("email")&&this.userInfo.email&&(this.emailStatus="checking",m["authController"].checkAvailablity({email:this.userInfo.email}).then((function(a){if(200===a.status)return e.emailStatus="ok"})).catch((function(a){if(409===a.response.status)return e.emailStatus="taken"})))},beforeRemove:function(){this.$refs.imageUploader.images=[],this.userInfo.profilePhoto=null,this.imgWarning=!0},uploadMedia:function(e,a,s){var t=this;function r(e){var a=new FileReader;a.addEventListener("load",(function(){t.finalImage=a.result})),a.readAsDataURL(e)}if(!this.selectedImages){this.imgWarning=!1;var o=e.getAll("file")[0];new l["a"](o,{quality:.1,success:function(e){n(e)},error:function(e){console.log(e)}})}function n(e){var a=c.a.storage().ref("user-".concat(t.userInfo.userName?t.userInfo.userName:"UnkownUser","-").concat(i()(e.name))).put(e);a.then((function(a){a.ref.getDownloadURL().then((function(a){r(e),t.userInfo.profilePhoto={},t.userInfo.profilePhoto.url=a,t.isUploading=!1,t.uploadProgress=0}))})),a.on(c.a.storage.TaskEvent.STATE_CHANGED,(function(e){t.isUploading=!0,t.uploadProgress=e.bytesTransferred/e.totalBytes*100}))}},handleSubmit:function(){var e=this;this.$validator.validateAll().then((function(a){if(!a||e.imgWarning||!e.userInfo.profilePhoto)return e.imgWarning=!0,e.$emit("onNotify",{title:"Oops, Bad Inputs",text:"Please check and double check the requirements.",type:"error"});e.isProcessing=!0,m["authController"].registerUser(e.userInfo).then((function(){e.$emit("onNotify",{title:"Registration Successful",text:"Please Login with your credentials. .😃",type:"success"}),e.$router.push("/login")})).catch((function(a){e.isProcessing=!1}))}))},handleEdit:function(){var e=this;m["authController"].editUser({fullName:this.userInfo.fullName,contactNo:this.userInfo.contactNo,profilePhoto:this.userInfo.profilePhoto,location:this.userInfo.location,address:this.userInfo.address,bio:this.userInfo.bio,gender:this.userInfo.gender}).then((function(a){var s=a.data,t=a.status;200===t&&(e.$store.dispatch("setAdmin",s),e.$store.dispatch("setSelectedUser",s),m["authController"].getUser(s._id).then((function(a){var s=a.data;e.$store.dispatch("setSelectedUser",s),e.$router.push("/me")})),e.$emit("onNotify",{title:"Profile Successfully Saved",text:"".concat(s.fullName,", you successfully edited your profile"),type:"success"}))})).catch((function(a){var s=a.response;console.log(s),e.$emit("onNotify",{title:"Edit Failed",text:"Sorry,  something went wrong. Please check your inputs.",type:"error"})}))},handleLogin:function(){var e=this;m["authController"].loginUser(this.loginInfo).then((function(a){localStorage.setItem("token",a.data["x-auth-token"]),window.location.reload(),e.$emit("onNotify",{title:"Login Successfull",text:"Welcome ".concat(a.data.user.fullName," to your profile."),type:"success"})})).catch((function(a){e.$emit("onNotify",{title:a.response.statusText,text:a.response.data.message.errorMessage,type:"error"})}))}},beforeMount:function(){this.mode=this.$route.fullPath.split("/").pop(),"edit"===this.mode&&(this.userInfo=this.$store.getters.getAdmin)},beforeRouteEnter:function(e,a,s){"edit"===e.fullPath.split("/").pop()?d["a"].getters.isLoggedIn?s():s("login"):d["a"].getters.isLoggedIn?s("/me"):s()},deactivated:function(){this.$destroy()}},v=f,p=(s("b0a4"),s("2877")),g=Object(p["a"])(v,t,r,!1,null,"4b850fbe",null);g.options.__file="ProfileControl.vue";a["default"]=g.exports},"9e19":function(e,a,s){e.exports=s.p+"img/login-cartoon.607b9b23.png"},b0a4:function(e,a,s){"use strict";var t=s("ee3e"),r=s.n(t);r.a},ee3e:function(e,a,s){},fbe7:function(e,a,s){e.exports=s.p+"img/reg-cartoon.bd3d542a.png"}}]);
//# sourceMappingURL=chunk-6825abe4.c557d2f8.js.map