(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d0ef6db0"],{"0d86":function(e,t,a){"use strict";var i=a("c8b3"),s=a.n(i);s.a},"964e":function(e,t,a){"use strict";var i=a("b6d4"),s=a.n(i);s.a},"9cac":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container mt-4 mb-5"},[a("div",{staticClass:"header"},[a("h1",[e._v(e._s("new"===e.mode?"Post a New Ad":"Edit your Ad"))])]),a("hr"),a("flash-message"),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.title,expression:"newProduct.title"},{name:"validate",rawName:"v-validate",value:{required:!0,min:5,max:25},expression:"{required: true, min: 5, max: 25}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("title")},attrs:{type:"text",placeholder:"Title",name:"title"},domProps:{value:e.newProduct.title},on:{input:function(t){t.target.composing||e.$set(e.newProduct,"title",t.target.value)}}}),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("title")))])]),a("div",{staticClass:"input-group mb-3"},[e._m(0),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newProduct.price,expression:"newProduct.price",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{required: true}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("price")},attrs:{type:"number","aria-label":"Amount (to the nearest dollar)",placeholder:"Price",name:"price"},domProps:{value:e.newProduct.price},on:{input:function(t){t.target.composing||e.$set(e.newProduct,"price",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("price")))])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group mb-3"},[e._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.location,expression:"newProduct.location"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",class:{"is-invalid":e.errors.has("location")},attrs:{id:"inputGroupSelect01",name:"location"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newProduct,"location",t.target.multiple?a:a[0])}}},e._l(e.locations,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("location")))])])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group mb-3"},[e._m(2),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.category,expression:"newProduct.category"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"custom-select",class:{"is-invalid":e.errors.has("category")},attrs:{id:"inputGroupSelect02",name:"category"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newProduct,"category",t.target.multiple?a:a[0])}}},e._l(e.categories,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("category")))])])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group mb-3"},[e._m(3),a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.newProduct.condition,expression:"newProduct.condition"}],staticClass:"custom-select",class:{"is-invalid":e.errors.has("category")},attrs:{id:"inputGroupSelect03",name:"condition"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newProduct,"condition",t.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",hidden:"",disabled:"",value:"null"}},[e._v("Select Condition of the product")]),a("option",{attrs:{value:"used"}},[e._v("Used")]),a("option",{attrs:{value:"new"}},[e._v("New")])]),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("condition")))])])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newProduct.description,expression:"newProduct.description"},{name:"validate",rawName:"v-validate",value:{required:!0,max:500},expression:"{required: true, max: 500}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("description")},attrs:{"data-gramm_editor":"false",id:"",cols:"30",rows:"10",placeholder:"Describe about this product here...",name:"description"},domProps:{value:e.newProduct.description},on:{input:function(t){t.target.composing||e.$set(e.newProduct,"description",t.target.value)}}}),a("small",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("description")))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.newProduct.images.length>=1,expression:"newProduct.images.length >= 1"}],staticClass:"image-preview-box jumbotron mb-3"},[a("div",e._l(e.newProduct.images,(function(t,i){return a("app-single-image-preview",{key:i,attrs:{image:t.url},on:{onImageRemove:function(t){e.removeUploadedImage(i)}}})})),1)]),e.isUploading?a("div",{staticClass:"progress mb-3"},[a("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",style:{width:e.uploadProgress+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),a("div",{staticClass:"image-uploader-box mb-3"},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"upload-wrapper"},[a("image-uploader",{key:1,ref:"imageUploader",class:{"image-uploader-error":e.imgWarning},attrs:{browseText:"Click to browse",dragText:"Drag an image",popupText:"Cover photos appears at first and will be used as default image.",primaryText:"Cover",dropText:"Drop here",markIsPrimaryText:"Make Cover",maxImage:5-e.newProduct.images.length},on:{"upload-success":e.uploadImageSuccess,"before-remove":e.beforeRemove}}),a("button",{staticClass:"btn btn-block btn-success",attrs:{disabled:this.selectedImages.length<1||this.selectedImages.length>5||this.newProduct.images.length>=5},on:{click:function(t){e.uploadMedia()}}},[e._v("\n          Upload\n          "),a("i",{staticClass:"fas fa-upload"})]),e.imgWarning?a("small",{staticClass:"invalid-feedback d-inline"},[e._v("Image is required")]):e._e()],1)]),a("div",{staticClass:"tips-wrapper",class:{"arrow_box-top":e.windowSize<=576,"arrow_box-left":e.windowSize>576}},[e._m(4)])]),a("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":e.allDone},attrs:{type:"button",disabled:e.checkMode||!e.isAllPropertyPresent},on:{click:function(t){e.reviewPost()}}},[e.allDone?e._e():a("span",[e._v(e._s("edit"===e.mode?"Edit And Publish":"Publish"))]),e.allDone?a("span",[e._v("Validation Completed")]):e._e(),a("i",{directives:[{name:"show",rawName:"v-show",value:e.allDone,expression:"allDone"}],staticClass:"fas fa-check-circle ml-2 valid-tick"}),e.checkMode&&!e.allDone?a("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status","aria-hidden":"true"}}):e._e()])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._v("$")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect01"}},[e._v("Location")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect02"}},[e._v("Category")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect03"}},[e._v("Condition")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("Use real photos!")]),a("p",[e._v("Ads with real photos get 10 times more views than with catalogue images.")]),a("img",{attrs:{src:"https://w.bikroy-st.com/dist/img/all/post/images-hint-4720b5e9.png",alt:""}}),a("p",[e._v("Images must be JPG or PNG format (max 5 MB). Do not upload images with watermarks.")])])}],o=(a("28a5"),a("ac6a"),a("7f7f"),a("0a0d")),r=a.n(o),n=(a("bc3a"),a("8aa5")),l=a.n(n),c=a("fc5c"),u=a("62b0"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"single-image-box"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"image"}],staticClass:"img-thumbnail"}),a("div",{staticClass:"delete-img",on:{click:function(t){e.removeImage()}}},[a("i",{staticClass:"fas fa-trash"})])])},m=[],p={props:["image"],methods:{removeImage:function(){this.$emit("onImageRemove")}}},v=p,g=(a("964e"),a("2877")),h=Object(g["a"])(v,d,m,!1,null,"34a7e104",null);h.options.__file="SingleImagePreview.vue";var f=h.exports,w=a("365c"),P={components:{"image-uploader":c["a"],"app-single-image-preview":f},data:function(){return{newProduct:{title:"",price:void 0,location:null,category:null,condition:null,description:"",images:[]},locations:[{name:"Select Location",value:null},{name:"Asia",value:"asia"},{name:"Africa",value:"africa"},{name:"North America",value:"north-america"},{name:"South America",value:"south-america"},{name:"Antartica",value:"antartica"},{name:"Europe",value:"europe"},{name:"Australia",value:"australia"}],categories:[{name:"Select Product Category",value:null},{name:"Mobiles",value:"mobile"},{name:"Electronics",value:"electronic"},{name:"Vehicles",value:"vehicle"},{name:"Property",value:"property"},{name:"Jobs",value:"job"},{name:"Services",value:"service"},{name:"Home & Living",value:"home-living"},{name:"Fashion, Health & Beauty",value:"fashion-health-beauty"},{name:"Hobbies, Sports & Kids",value:"hobby-sport-kid"},{name:"Business & Industry",value:"business"},{name:"Education",value:"education"},{name:"Pets & Animals",value:"pets"},{name:"Food & Agriculture",value:"food"}],selectedImages:[],isImageBoxTouched:!1,checkMode:!1,allDone:!1,windowSize:void 0,isUploading:!1,uploadProgress:0,mode:void 0,imgWarning:!1,isAllPropertyPresent:!1}},methods:{uploadImageSuccess:function(e,t,a){this.isImageBoxTouched=!0;var i=e.getAll("file")[0];this.selectedImages.length<5-this.newProduct.images.length?this.selectedImages.push(i):(this.$refs.imageUploader.images.pop(5-this.selectedImages.length),this.flash("Maximum Image Limit: 5","error",{timeout:3e3,important:!0}))},beforeRemove:function(e,t,a){this.selectedImages.splice(e,1),t()},uploadSingletoFirebase:function(e){var t=this;function a(e){var a=l.a.storage().ref("products-".concat(t.newProduct.title?t.newProduct.title:"UnkownProduct","-").concat(r()(e.name))).put(e);a.then((function(e){e.ref.getDownloadURL().then((function(e){t.isUploading=!1,t.uploadProgress=0;var a={};a.url=e,t.newProduct.images.push(a)}))})),a.on(l.a.storage.TaskEvent.STATE_CHANGED,(function(e){t.isUploading=!0,t.uploadProgress=e.bytesTransferred/e.totalBytes*100}))}new u["a"](e,{quality:.3,success:function(e){a(e)},error:function(e){console.log(e)}})},uploadMedia:function(){var e=this;this.selectedImages.length<1||this.selectedImages.length>5||this.newProduct.images.length>=5||(this.selectedImages.forEach((function(t){e.uploadSingletoFirebase(t)})),this.selectedImages=[],this.$refs.imageUploader.images=[])},removeUploadedImage:function(e){this.newProduct.images.splice(e,1)},reviewPost:function(){var e=this;this.isImageBoxTouched=!0,this.checkMode=!0,this.$validator.validateAll().then((function(t){t?(e.allDone=!0,"new"===e.mode?w["productController"].newProduct(e.newProduct).then((function(t){e.$store.dispatch("addNewProduct",t.data),e.$emit("onNewPost"),e.$router.push("/products/".concat(t.data._id)),e.$destroy()})).catch((function(e){window.location.reload("/")})):w["productController"].editProduct(e.$route.params.id,e.newProduct).then((function(t){e.$store.dispatch("setSelectedProduct",t.data),e.$emit("onPostEdit",t.data.title),e.$router.push("/products/".concat(t.data._id))})).catch((function(e){return console.log(e)}))):e.checkMode=!1}))}},watch:{selectedImages:function(){this.selectedImages.length<1&&this.newProduct.images.length<1&&this.isImageBoxTouched?this.imgWarning=!0:this.imgWarning=!1},newProduct:{deep:!0,handler:function(){this.newProduct.images.length>0&&this.newProduct.title&&this.newProduct.price&&this.newProduct.location&&this.newProduct.category&&this.newProduct.condition&&this.newProduct.description?this.isAllPropertyPresent=!0:this.isAllPropertyPresent=!1}},"newProduct.images":function(){this.newProduct.images.length>0&&(this.imgWarning=!1)},isUploading:function(){this.isUploading&&(this.imgWarning=!1)}},created:function(){var e=this;this.windowSize=document.documentElement.clientWidth,window.addEventListener("resize",(function(){e.windowSize=document.documentElement.clientWidth}))},beforeMount:function(){if(this.mode=this.$route.fullPath.split("/").pop(),"edit"===this.mode){var e=this.$store.getters.getSelectedProduct;e&&e._id==this.$route.params.id?(this.newProduct.title=e.title,this.newProduct.price=e.price,this.newProduct.location=e.location,this.newProduct.description=e.description,this.newProduct.images=e.images,this.newProduct.category=e.category,this.newProduct.condition=e.condition):this.$router.push("404")}}},b=P,_=(a("0d86"),Object(g["a"])(b,i,s,!1,null,"35523459",null));_.options.__file="ProductControl.vue";t["default"]=_.exports},b6d4:function(e,t,a){},c8b3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d0ef6db0.5b41c103.js.map